# Telegram Bot — сценарии и команды

## Команды
- /start — приветствие, привязка telegram_id, кнопки меню
- /vote — краткое состояние текущей сессии + кнопка «Открыть веб‑панель» (генерация одноразовой ссылки)
- /results — мои последние результаты (место, оценка, бонус) + кнопка «Открыть веб‑панель»
- /me — профиль, статус, роль
- /admin — панель для администраторов (если role=admin): быстрые ссылки в веб‑админку, подсказки

## Inline‑кнопки
- «Открыть веб‑панель» → бот вызывает API generate-code, отправляет ссылку `http://LAN_IP:5173/login?code=XYZ`

## Технические детали бота
- Режим работы: long polling — публичный домен не нужен
- Токен: TELEGRAM_BOT_TOKEN в .env backend
- Авторизация API для генерации кодов: X-API-Key (на стороне бота хранить как секрет)

## Ответы/шаблоны
- При /vote:
  - «Сессия: активна/закрыта, до завершения: N дней, участников: M. Нажмите, чтобы перейти к голосованию.»
- При /results:
  - «Ваши результаты: место X, оценка Y, бонус Z ₽. Нажмите, чтобы открыть подробности.»

## Безопасность
- Ссылки одноразовые и короткоживущие
- Привязка telegram_id к пользователю происходит при первом обращении (/start)
- Лимит генерации ссылок на пользователя (anti‑spam)
